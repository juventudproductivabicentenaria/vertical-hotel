<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="res_currency_rate_provider_form_view" model="ir.ui.view">
            <field name="name">res.currency.rate.provider.form</field>
            <field name="model">res.currency.rate.provider</field>
            <field name="arch" type="xml">
                <form string="Currency Rates Provider">
                    <sheet>
                        <div class="oe_button_box" name="button_box"/>
                        <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active','=',True)]}"/>
                        <group name="options">
                            <group>
                                <field name="service"/>
                                <field name="active" invisible="1"/>
                                <field name="currency_name" invisible="1"/>
                                <div attrs="{'invisible':['|',('service', '!=', 'BCV'),('currency_name', '=', 'VEF')]}"
                                     class="alert alert-warning" colspan="2" role="alert">
                                    <strong>!</strong>You are using the exchange rate service of the Central Bank of Venezuela with a base currency other than VEF. <br/>
                                    As long as the Central Bank of Venezuela only provides VEF-based exchange rates, other foreign currency exchange rates are recalculated and may differ from the actual rates.
                                </div>
                            </group>
                            <group groups="base.group_multi_company">
                                <field name="company_id"/>
                            </group>
                            <group>
                                <label for="interval_number"/>
                                <div class="o_row">
                                    <field name="interval_number" class="ml8"/>
                                    <field name="interval_type"/>
                                </div>
                            </group>
                            <group>
                                <field name="last_successful_run"/>
                            </group>
                            <group>
                                <field name="next_run"/>
                            </group>
                            <group>
                                <field name="available_currency_ids" invisible="1"/>
                                <field name="currency_ids" widget="many2many_tags" options="{'no_create_edit': True}"
                                domain="[('id', 'in', available_currency_ids)]" invisible="0"/>
                            </group>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="action_res_currency_rate_provider_update_wizard" model="ir.actions.server">
            <field name="name">Update Rates Wizard</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="l10n_ve_currency_rate_update.model_res_currency_rate_provider"/>
            <field name="binding_model_id" ref="l10n_ve_currency_rate_update.model_res_currency_rate_provider"/>
            <field name="state">code</field>
            <field name="code">
                if records:
                    action = {
                        'type': 'ir.actions.act_window',
                        'res_model': 'res.currency.rate.update.wizard',
                        'views': [[False, 'form']],
                        'target': 'new',
                        'context': {
                            'default_provider_ids': [(6, False, records.ids)],
                        },
                    }
            </field>
        </record>

        <record id="res_currency_rate_provider_tree_view" model="ir.ui.view">
            <field name="name">res.currency.rate.provider.tree</field>
            <field name="model">res.currency.rate.provider</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="service"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="update_schedule"/>
                    <field name="available_currency_ids" invisible="1"/>
                    <field name="currency_ids" widget="many2many_tags"/>
                    <field name="next_run"/>
                </tree>
            </field>
        </record>

<!--        <record id="ModelName_search_view" model="ir.ui.view">-->
<!--            <field name="name">ProjectName.ModelName.search</field>-->
<!--            <field name="model">ProjectName.ModelName</field>-->
<!--            <field name="arch" type="xml">-->
<!--                <search string="ModelTitle">-->
<!--                    <group expand="1" string="Group By">-->
<!--                        <filter string="Example Field" name="example_field" domain="[]"-->
<!--                                context="{'group_by':'example_field'}"/>-->
<!--                    </group>-->
<!--                </search>-->
<!--            </field>-->
<!--        </record>-->

        <record id="res_currency_rate_provider_act_window" model="ir.actions.act_window">
            <field name="name">Currency Rates Providers</field>
            <field name="res_model">res.currency.rate.provider</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem name="Currency Rates Providers" id="res_currency_rate_provider_menu" parent="account.account_account_menu"
                  action="res_currency_rate_provider_act_window" sequence="30"/>

    </data>
</odoo>